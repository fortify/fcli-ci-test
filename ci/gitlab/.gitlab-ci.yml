# Expected inputs from trigger:
# VERSION, FCLI_VERSION, PRODUCT, COMPONENT, SOURCE_DIR, OS, FORTIFY_RELEASE, GITLAB_IMAGE (optional), PIPELINE_NAME (optional)

workflow:
  name: $PIPELINE_NAME
  rules:
    - when: never

# Conditionally include version/component-specific pipelines
include:
  - local: .gitlab-ci-v2-setup.yml
    rules:
      - if: $VERSION == "v2" && $COMPONENT == "setup"
  - local: .gitlab-ci-v2-fod-ast-scan.yml
    rules:
      - if: $VERSION == "v2" && $PRODUCT == "fod" && $COMPONENT == "ast-scan"
  - local: .gitlab-ci-v2-ssc-ast-scan.yml
    rules:
      - if: $VERSION == "v2" && $PRODUCT == "ssc" && $COMPONENT == "ast-scan"